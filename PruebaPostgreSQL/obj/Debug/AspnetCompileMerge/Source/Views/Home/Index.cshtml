@model Entities.Credito.ViewModels.DashboardCreditoViewModel

@{
    ViewBag.Title = "Home Page";
}
@if (Request.IsAuthenticated)
{
    <div role="main">
        <!-- top tiles -->
        <div class="row tile_count">
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-user"></i> Total Clientes</span>
                <div class="count">2500</div>
                <span class="count_bottom"><i class="green">4% </i> Desde la última semana</span>
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-clock-o"></i> Solicitudes Pendientes</span>
                <div class="count">123.50</div>
                <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i>3% </i> Desde la última semana</span>
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-sort-asc"></i> Solicitudes Desembolsadas</span>
                <div class="count green">2,500</div>
                <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i>34% </i> Desde la última semana</span>
            </div>
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                <span class="count_top"><i class="fa fa-sort-asc"></i> Prestamos en mora</span>
                <div class="count">7,325</div>
                <span class="count_bottom"><i class="green"><i class="fa fa-sort-asc"></i>34% </i> Desde la última semana</span>
            </div>
        </div>
        <!-- /top tiles -->


        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="dashboard_graph">
                    <div class="row x_title">
                        <div class="col-md-6">
                            <h3>Solicitudes por Día <small>Número de solicitudes desembolsadas último mes</small></h3>
                        </div>
                        <div class="col-md-6">
                            <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                                <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                                <span>December 30, 2014 - January 28, 2015</span> <b class="caret"></b>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-12">
                        <div id="chart_plot_solicitudes" class="demo-placeholder"></div>
                    </div>
                    <div class="col-md-3 col-sm-3 col-xs-12 bg-white">
                        <div class="x_title">
                            <h2>Tipos de Préstamo</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="col-md-12 col-sm-12 col-xs-6">
                            @for (var c = 0; c < Model.ListaItemTipoCredito.Count; c++)
                            {
                                <div>
                                    <p>@Model.ListaItemTipoCredito[c].NombreTipoCredito</p>
                                    <div class="">
                                        <div class="progress progress_sm" style="width: 76%;">
                                            <div class="progress-bar bg-green" role="progressbar" data-transitiongoal="@Model.ListaItemTipoCredito[c].Cantidad"></div>
                                        </div>
                                    </div>
                                </div>
                            }

                        </div>
                        
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        <br />

    </div>
    @section Scripts {
        <script type="text/javascript">

            function init_flot_chart() {

                if (typeof ($.plot) === 'undefined') { return; }

                var arr_data1 = [
                    //[gd(2012, 2, 1), 17],
                    //[gd(2012, 2, 2), 74],
                    //[gd(2012, 2, 3), 6],
                    //[gd(2012, 2, 4), 39],
                    //[gd(2012, 2, 5), 20],
                    //[gd(2012, 2, 6), 85],
                    //[gd(2012, 2, 7), 7],
                    //[gd(2012, 2, 8), 7],
                    //[gd(2012, 2, 9), 100]
                ];

                var items = @Html.Raw(Json.Encode(Model.ListaItemSolicitudPorMes));
                $.each(items, function (index, value) {
                    arr_data1.push([gd(value.Anio, value.Mes, value.Dia), value.Cantidad]);
                });


                var chart_plot_01_settings = {
                    series: {
                        lines: {
                            show: false,
                            fill: true
                        },
                        splines: {
                            show: true,
                            tension: 0.4,
                            lineWidth: 1,
                            fill: 0.4
                        },
                        points: {
                            radius: 0,
                            show: true
                        },
                        shadowSize: 2
                    },
                    grid: {
                        verticalLines: true,
                        hoverable: true,
                        clickable: true,
                        tickColor: "#d5d5d5",
                        borderWidth: 1,
                        color: '#fff'
                    },
                    colors: ["rgba(38, 185, 154, 0.38)", "rgba(3, 88, 106, 0.38)"],
                    xaxis: {
                        tickColor: "rgba(51, 51, 51, 0.06)",
                        mode: "time",
                        tickSize: [1, "day"],
                        //tickLength: 10,
                        axisLabel: "Date",
                        axisLabelUseCanvas: true,
                        axisLabelFontSizePixels: 12,
                        axisLabelFontFamily: 'Verdana, Arial',
                        axisLabelPadding: 10
                    },
                    yaxis: {
                        ticks: 8,
                        tickColor: "rgba(51, 51, 51, 0.06)",
                    },
                    tooltip: false
                }

                if ($("#chart_plot_solicitudes").length) {
                    console.log('Plot1');

                    $.plot($("#chart_plot_solicitudes"), [arr_data1], chart_plot_01_settings);
                }

            }

            $(document).ready(function () {
                init_flot_chart();
            });

        </script>
    }

}
else
{
    @section Scripts {
        <script type="text/javascript">
            window.location.href = '@Url.Action("Login", "Account")';
        </script>
    }
}